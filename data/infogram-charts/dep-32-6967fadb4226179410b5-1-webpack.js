(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([["infogram-charts/dep-32"],{7333:(t,e,a)=>{a.r(e),a.d(e,{ColumnStacked:()=>W});var r=a(498);var n=a.n(r);var i=a(7248);var o=a(4028);var l=a(7249);var c=a(4019);var s=a(3989);var u=a(1115);var h=a(3975);var f=a(3976);var d=a(420);var g=a(7329);var v=a(3967);var p=a(7243);var y=a(7244);var m=a(7250);var x=a(4024);var b=a(4025);var S=a(7252);var k=a(7297);var E=a(1112);var w=a(7240);var O=a(4016);var C=a(4013);var L=a(7259);var D=a(1111);var P=a(4022);var T=a(1113);var A=a(7254);var I=a(3974);var B=a(7334);var j=a(7239);function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=Array(e);a<e;a++)r[a]=t[a];return r}function z(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,a){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(a||t):n.value}})(t,e,a||t)}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(0,I.putGraph)("column-stacked",B.ColumnStacked);var W=function(t){"use strict";var e;!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(r,t);var a=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t=G(r),a;if(e){var n=G(this).constructor;a=Reflect.construct(t,arguments,n)}else a=t.apply(this,arguments);var i;return(i=a)&&("object"==(i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)||"function"==typeof i)?i:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)});function r(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),a.apply(this,arguments)}var g,I;return I=[{key:"getClassName",value:function(){return"ColumnStacked"}}],g=[{key:"render",value:function(){var t=this;this.detectDimensions();var e=this.options,a=this.root;var r=new L.Renderer({instance:this});var o=this.getSheetData();var l=(0,b.formatHelper)(o);var c=(0,p.percentEnabled)(e);var d=this.runtime={width:e.width,height:e.height,components:{},layout:{},inanimate:(0,x.inanimated)(e),sheet:o,formatter:l,percent:c};var g=this.prepareSheetData(o,this.sheetIndex);this.createTickIntervals(),(0,C.Controls)(this,{width:e.width}),(0,P.DownloadButton)(this,e.style.legend);var k=(0,O.legendHelper)({instance:this});if(!(this.sheetsNotFound(g)||this.failSafeByHeight(40))){var T=d.margin=d.layout.margin={top:0,right:0,bottom:0,left:0};var A=d.layout.marginTitle={left:0,right:0,top:0,bottom:0};var I=d.layout.marginAxis={left:0,right:0};var B=d.limits={maxCategoryWidth:0,maxCategoryHeight:6};var z=d.bottomLabelPadding={top:6,right:2,bottom:0,left:2};var R=this.createAnimationCounter(3);var G;var M=function(t){if(Array.isArray(t))return t}(G=o.axis)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r=[];var n=!0;var i=!1;var o,l;try{for(a=a.call(t);!(n=(o=a.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,l=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw l}}return r}}(G,2)||function(t,e){if(t){if("string"==typeof t)return H(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if("Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return H(t,e)}}(G,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),W=M[0],N=M[1];d.xAxisOptions=W,d.yAxisOptions=N;var U=e.style.axis,_=U.x,Z=U.y;var F=e.style.grid;var V=n().get(W,"title");var Y=d.categoryData=this.getCategoryData(g);var q=d.yDomain="absolute"!==e.series.data||(0,O.legendFiltered)(this)?this.getDomain(g):this.getSheetsSeriesDomain();var X=(0,w.limit)(N,q);var $=q[0]<0;var J=d.yScale=(0,s.default)().domain(q).clamp(X);d.categoryLayout=o.categories.layout;var K=d.spacing={maxBeforeXAxisTick:50,beforeCategoryBorder:$?z.top:0,beforeBottomCategories:5};var Q=d.components.yAxisLeftText=(0,m.Axis)().scale(J).orient("left").style(Z.tick);this.titleLayout(["x","y"]);var tt=(0,E.getTextDimensions)([(0,E.firstNonEmpty)(Y)],_.tick);T.right+=Math.ceil(.5*tt.height);var te=d.width-T.left-A.left-T.right-A.right;var ta={width:0,height:0};if(N.ticks){var tr=(0,j.ensureMinTicks)(J,this.runtime.yTickInterval);if(c){var tn=(0,p.percentFormat)(l.axis.y);tr.forEach(function(t,e){tr[e]=tn(t)}),ta=(0,E.getTextDimensions)(tr,Z.tick)}else ta=this.yTicksMetrics(tr);I.left=ta.width,T.top=ta.height}var ti=d.height-T.top-A.top-T.bottom-A.bottom;V&&(B.maxCategoryHeight+=z.bottom),B.maxCategoryHeight+=Math.floor(.27*ti),d.graphWidth=te-I.left-I.right;var to=(0,i.default)(0,Y.length);var tl=d.xScale=this.createHorizontalScale(to,[0,d.graphWidth],this.featuresColumnWidth(o));d.xScaleResize=this.createHorizontalScaleResize(),B.maxCategoryWidth=tl.rangeBand()+tl.padding()-z.left-z.right,d.igcLeftOffset=T.left+A.left+I.left,this.featuresCurtainAnimation()&&(d.igcLeftOffset=Math.floor(d.igcLeftOffset)),1===to.length&&(B.maxCategoryWidth=d.graphWidth-z.left-z.right);var tc=this.createCategoryLabels();B.maxCategoryHeight=tc.height+z.top+z.bottom,W.ticks||(B.maxCategoryHeight=1);var ts=d.graphHeight=ti-B.maxCategoryHeight-K.beforeCategoryBorder;var tu=(0,y.Bottom)().style(_.tick).data(W.ticks?tc.renderData:[]).textAlign(tc.renderData.textAlign).bounds({height:B.maxCategoryHeight,y:ti-B.maxCategoryHeight+K.beforeBottomCategories});J.rangeRound([ts,0]);var th=d.components.yGridLines=(0,S.GridLines)().scale(J).orient(S.GridLines.ORIENTS.horizontal).tickSize(-te).highlightZero(o.grid.horizontalZeroHighlight).style(F).offset({left:-I.left});var tf=(0,S.GridLines)().scale(tl).orient(S.GridLines.ORIENTS.vertical).tickSize(ts).highlightZero(o.grid.verticalZeroHighlight).style(F);o.grid.vertical||tf.tickValues([]),Q.textOffset(-(ta.height-ta.baseLineOffset)).offset({left:-I.left}),this.yTicksSetup(),this.gridSetupHorizontal();var td=0;N.ticks&&(td=Q.getBorderingTick()-ta.height)>0&&(td=0),d.layout.firstTickOffset=td;var tg=T.top+A.top;this.titleComponents(["x","y"]);var tv=d.components,tp=tv.bottomTitle,ty=tv.leftTitle;tp.dispatch().on("animationEnd",R);var tm={igc:{x:d.igcLeftOffset,y:tg}};d.inanimate&&(0,x.removeAnimation)([ty,tp,tf,th,Q,tu]),this.containerSetup();var tx=a.select(".igc");var tb=h[e.animation.ease];var tS=e.animation.duration;a.attr("width",d.width).attr("height",d.height),r.add(function(){tx.selectAll(".igc-labels").remove(),a.transition().ease(tb).duration(tS).on("start",function(){t.events.call("startAnimation")}).on("end",function(){R()}),tx.attr("transform","translate(".concat(tm.igc.x,", ").concat(tm.igc.y,")"))}),r.addGrid(Q,"igc-y-axis-text"),r.addGrid(th,"igc-ygrid"),r.addGrid(tf,"igc-xgrid"),r.addGrid(tu,"igc-x-axis-text"),r.addGraph([{graphs:g,x:tl,y:J,textStyle:e.style.graph.item.value,legend:k,transitionDuration:tS,tooltip:(0,D.createStyledTooltip)(this),animationEnd:R}]),this.featuresCurtainAnimation()&&r.add(function(){var e=a.select("defs");var r={x:-d.igcLeftOffset,y:-tg,width:d.width,height:d.height,clipPathId:"igc-cp-curtain-".concat(t.chartId)};tx.selectAll(".igc-graph").attr("clip-path","url(".concat((0,E.absoluteUrl)(r.clipPathId),")")),(0,v.createRectClipPath)(e,r);var n=e.select("#".concat(r.clipPathId)).selectAll("path");n.attr("transform","translate(-".concat(d.width+d.igcLeftOffset,", 0)")).transition().on("end",function(){n.attr("transform",null)}).duration(d.inanimate?0:500).ease(f.linear).attr("transform","translate(0, 0)")}),"AreaStepped"!==this.getClassName()&&o.grid.horizontal&&W.ticks?r.addGrid(function(t){t.each(function(){var t=(0,u.default)(this).selectAll(".igc-x-axis-border-line").data([0]);var e=tS;0===t.size()&&(e=0),(t=t.merge(t.enter().append("rect"))).attr("class","igc-x-axis-border-line").transition().ease(tb).duration(e).attr("x",-I.left).attr("y",ts+K.beforeCategoryBorder).attr("width",d.graphWidth+I.left).attr("height",2).styles({fill:F.color,stroke:"none","stroke-width":0})})},"igc-x-axis-border"):r.add(function(){a.select(".igc .igc-grid .igc-x-axis-border").remove()}),r.addTitle(ty,"igc-title-left"),r.addTitle(tp,"igc-title-bottom"),r.start()}}},{key:"graphInstanceSetup",value:function(t,e,a,r){var n=r.graphs.length;var i=this.chartId,o=this.runtime;var l=o.formatter,c=o.percent,s=o.sheet;var u=r.transitionDuration,h=r.legend,g=r.tooltip;var v=e.colors;var y="AreaStepped"===this.getClassName()?.7:null;var m=this.graphData({data:e.data,colors:v,groupOffset:0,groupCount:1});var b=(0,d.default)("highlightStart","highlightEnd","animationStart","animationUpdateStart","animationEnterStart","animationEnd","animationUpdateEnd","animationEnterEnd","animationTextEnd","openUrl");h&&h.data().forEach(function(t){h.addListener({id:"".concat(i,"_").concat(t.groupId),dispatch:b})});var S=(0,O.createListenToLegend)({easing:f.linear,ns:"shape",opacity:y,dispatch:b});var k=function(t){return"".concat(t.xLabel,": ").concat(l.tooltip.y.format(t.yLabel))};var E=function(t){return t.groupLabel};c&&(k=function(t){return t.xLabel},E=(0,p.tooltipPercentValue)({sheet:s,formatter:l,props:["groupLabel","yLabel","y"]}));var w=(0,A.createAddMouseEvents)({dispatch:b,legend:h,opacity:y,tooltip:g,chartId:i,tooltipText:k,tooltipValue:E,colors:v});var C=(0,x.removeDelay)(this,function(){return a/n*(u-200)});t.scaleY(r.y).data(m).listenToLegend(S).addMouseEvents(w).dispatch(b).transitionDelay(C).transitionDuration(u)}},{key:"defaults",value:function(){return n().merge({},R(G(r.prototype),"defaults",this).call(this),{series:{data:"separate"},style:{graph:{item:{value:{color:{method:"contrast",contrast:{light:"#ffffff",dark:"#000000",background:"#ffffff"},manual:{fill:"#000000",stroke:void 0}},placementStrategy:"no-alignment",hideOverlapping:!0,align:"bottom"}}}}})}},{key:"getDomain",value:function(t){var e=[(0,o.default)(t,function(t){var e=(0,l.default)(t.data,function(t){return t.y<0?t.y:0});return T.math.preciseNumber(e)}),(0,c.default)(t,function(t){var e=(0,l.default)(t.data,function(t){return t.y>0?t.y:0});return T.math.preciseNumber(e)})];return(0,w.ensureZeroEqual)(e),(0,w.ensureZero)(e),(0,s.default)().domain(e).nice(10).domain()}},{key:"getSheetsSeriesDomain",value:function(){var t=this;var e;return this.options.sheets.forEach(function(a,r){var i=n().merge({},t.emptySheetData(),a);var o=t.prepareSheetData(i,r);var l=t.getDomain(o);0===r?e=l.slice(0):(e[0]=Math.min(l[0],e[0]),e[1]=Math.max(l[1],e[1]))}),e}},{key:"emptySheetData",value:function(){return n().merge({},R(G(r.prototype),"emptySheetData",this).call(this),{series:[{type:"column-stacked"}]})}},{key:"prepareSheetData",value:function(t,e){var a=t.categories.colors;var r=n().get(t,"graphOptions.column",{}).showValues;t.categories.data||(t.categories.data=[]);var i=e===this.sheetIndex;var o;i&&(o=(0,O.createLegendData)(this));var l=t.categories.data.map(function(t,e){return{colors:a,data:[],categoryIdx:e,showValues:!0===r,type:"column-stacked"}});t.series.forEach(function(e,r){var c=n().get(e,"index",r);(!i||o({color:(0,E.getColor)(c,a),title:(0,E.replaceBlank)(e.title),groupId:c}).active)&&e.data.forEach(function(a,r){var i=t.categories.data[r];void 0!==i&&l[r].data.push({x:r,y:(0,E.replaceBlank)(a,null),xLabel:(0,E.replaceBlank)(e.title),yLabel:(0,E.replaceBlank)(e.rawData[r]),groupLabel:(0,E.replaceBlank)(i),seriesIdx:c,link:n().get(e,"links[".concat(r,"]"),null)})})});var c=l.length;return l.forEach(function(t){0!==t.data.length&&(t.data.some(function(t){return null!==t.y})||(t.data=[]))}),(l=l.filter(function(t){return t.data&&t.data.length>0})).length!==c&&l.forEach(function(t,e){t.data.forEach(function(t){t.x=e})}),this.runtime.percent&&(0,p.adjustStackedGraphs)(l,"y"),l}},{key:"createHorizontalScaleResize",value:function(){var t=this.featuresColumnWidth(this.runtime.sheet);return t?function(e,a){e.rangeBandsFixed(a,t)}:function(t,e){t.rangeBandsPct(e)}}},{key:"createHorizontalScale",value:function(t,e,a){var r=(0,k.Ordinal)().domain(t).rangeBandsPct(e);return a&&(r=(0,k.Ordinal)().domain(t).rangeBandsFixed(e,a)),r}},{key:"featuresColumnWidth",value:function(t){return t.categories.categoryWidth?Number(t.categories.categoryWidth):null}},{key:"featuresCurtainAnimation",value:function(){return"AreaStepped"===this.getClassName()}},{key:"graphData",value:function(t){var e=this.runtime;return function(t){var e=t.data,a=t.xScale,r=t.yScale,n=t.colors,o=t.groupOffset,l=t.groupCount;var c=[0,0];var s=a.bandwidth();var u=[];if(e.forEach(function(t,e){var i=u[e]={};var o=t.y;var l=+(o>0);i.y0=c[l],c[l]+=o,i.y1=c[l],i.x=t.x,i.width=s,i.xPos=a(t.x),i.xLabel=t.xLabel,i.y=t.y,i.height=r(i.y1)-r(i.y0),i.yPos=r(i.y0)+(0===l?1:0),i.yLabel=t.yLabel,i.groupLabel=t.groupLabel,i.link=t.link,i.seriesIdx=t.seriesIdx,i.color=t.color||(0,E.getColor)(t.seriesIdx,n),i.group=t.group,i.stackIndex=t.stackIndex,i.categoryLabel=t.categoryLabel}),l>1){var h=(0,k.Ordinal)().domain((0,i.default)(0,l));u.forEach(function(t){var e=t.xPos;h.rangeBandsPct([e,e+s]),t.xPos=h(o+t.group),t.width=h.bandwidth()})}return u}(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};var r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),r.forEach(function(e){var r;r=a[e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r})}return t}({xScale:e.xScale,yScale:e.yScale},t))}}],z(r.prototype,g),I&&z(r,I),r}(g.ColumnClass)},7334:(t,e,a)=>{a.r(e),a.d(e,{ColumnStacked:()=>u});var r=a(498);var n=a.n(r);var i=a(3989);var o=a(1115);var l=a(3984);var c=a(1112);var s=a(3968);function u(){var t=function(t){v.duration.y=y,0===y&&(v.duration.x=y,E=0),t.each(function(){if(!g.length){b.call("animationStart"),b.call("animationUpdateStart"),b.call("animationUpdateEnd"),b.call("animationEnterStart"),b.call("animationEnterEnd"),b.call("animationEnd");return}var t=(0,o.default)(this);var n=t.selectAll("path");n.transition().duration(0);var i=a(n);r(i[0]),e(t,i)})};var e=function(t,e){var a=t.selectAll("path").data(e);var r=a.enter().insert("path","text");var n=0===a.size()&&a.size()<r.size();var i=v.duration;var o=0;a.exit().remove(),a.style("fill",function(t){return t.next.color}).style("stroke-width",0).style("opacity",x),n?(a=a.merge(r),b.call("animationStart"),b.call("animationUpdateStart"),b.call("animationUpdateEnd"),r.call(u,function(){S(a),k(a),b.call("animationEnterEnd"),b.call("animationEnd")})):(b.call("animationStart"),b.call("animationUpdateStart"),a.transition().duration(i.y).attrTween("d",f(function(t){return{yPos:t.next.yPos,xPos:t.xPos,height:t.next.height,width:t.width}})).transition().duration(i.x).on("start",function(){o++}).attrTween("d",f(function(t){return t.next})).on("end",function(){if(0==--o){if(b.call("animationUpdateEnd"),0===r.size()){b.call("animationEnterStart"),b.call("animationEnterEnd"),b.call("animationEnd"),S(a),k(t.selectAll("path"));return}r.call(u,function(){b.call("animationEnterEnd"),b.call("animationEnd"),S(a.merge(r)),k(t.selectAll("path"))})}}))};var a=function(t){var e=[];return t.each(function(t){var a=n().merge({},t);e.push(a)}),0===e.length&&(e=g.map(function(t){var e=n().merge({},t);return e.height=0,e.yPos=d(0),e})),(0,c.pairData)(e,g,function(t){t.height=0}),e};var r=function(t){var e={x:["xPos","width"]};var a;var r;var n;if(t){var i=t.next;for(a in v.duration)e[a]&&(r=e[a].length,n=0,e[a].forEach(o),r===n&&(v.duration[a]=0))}function o(e){.2>Math.abs(t[e]-i[e])&&n++}};var u=function(t,e){var a=0;t.style("fill",function(t){return t.color}).style("stroke-width",0).attr("d",function(t){return h(t.xPos,t.yPos,t.width,0,0)}).style("opacity",x),t.transition().duration(y+E).ease(l.elasticOut).delay(function(){return m+p.apply(this,arguments)}).attrTween("d",f(function(t){return t.next})).on("start",function(){0===a&&b.call("animationEnterStart"),a++}).on("end",function(){0==--a&&e()})};var h=s.barToRight;var f=(0,s.createTweenShape)(h,"y");var d=(0,i.default)();var g=[];var v={duration:{x:400,y:700}};var p=function(){return 0};var y=700;var m=0;var x=null;var b;var S;var k;var E=250;return Object.assign(t,{scaleY:function(e){return arguments.length?(d=e.copy(),t):d},data:function(e){return arguments.length?(g=e,t):g},transitionDelay:function(e){return arguments.length?(p=e,t):p},transitionDuration:function(e){return arguments.length?(y=e,t):y},transitionTiming:function(e){return arguments.length?(v=e,t):v},renderDelay:function(e){return arguments.length?(m=e,t):m},dispatch:function(e){return arguments.length?(b=e,t):b},opacity:function(e){return arguments.length?(x=e,t):x},listenToLegend:function(e){return arguments.length?(S=e,t):S},addMouseEvents:function(e){return arguments.length?(k=e,t):k}}),t}}}]);