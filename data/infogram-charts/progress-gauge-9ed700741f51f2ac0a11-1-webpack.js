(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[58],{7395:(t,e,a)=>{a.r(e),a.d(e,{Gauge:()=>C});var r=a(498);var o=a.n(r);var n=a(3975);var i=a(7241);var s=a(7302);var l=a(7301);var c=a(1113);var u=a(7259);var h=a(4025);var d=a(4016);var p=a(4013);var v=a(1111);var f=a(1112);var g=a(1997);var b=a(4022);function m(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,a){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(a||t):o.value}})(t,e,a||t)}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){"use strict";var e;!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(r,t);var a=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t=x(r),a;if(e){var o=x(this).constructor;a=Reflect.construct(t,arguments,o)}else a=t.apply(this,arguments);var n;return(n=a)&&("object"==(n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof n)?n:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)});function r(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),a.apply(this,arguments)}var l,C;return C=[{key:"getClassName",value:function(){return"Gauge"}}],l=[{key:"render",value:function(){var t=this;this.detectDimensions();var e=this.root,a=this.options;var r=new u.Renderer({instance:this});var l=this.getSheetData();var c=(0,h.formatHelper)(l);var v=this.runtime={width:a.width,height:a.height,sheet:l,formatter:c};var g=a.fixedHeight,m=a.style;var y=this.prepareSheetData(l);var x=this.createAnimationCounter(2);var S={top:15,bottom:10};var C={bottom:0};(0,p.Controls)(this,{width:a.width}),(0,b.DownloadButton)(this,m.legend);var k=(0,d.legendHelper)({instance:this});if(!i.BarClass.prototype.sheetsNotFound.call(this,y.data)){var R=v.width;var w=g?v.height:.6*R;var O=R/2*.9;var P=S.top+S.bottom;var D=o().get(l,"series[0].data[0].min.label","");var A=o().get(l,"series[0].data[0].max.label","");var L=o().get(l,"series[0].showLabels")&&(D||A);var j=o().get(a,"style.axis.x.tick");if(L&&(C.bottom=(0,f.getTextDimensions)("".concat(D).concat(A),j).height+10),O+P+C.bottom>w){var E=w-P-C.bottom;E>P+C.bottom?O=E:(S.top=0,S.bottom=0,P=S.top+S.bottom,(E=w-C.bottom)>C.bottom?O=E:(L=!1,C.bottom=0,O=w))}var I;var T;if(L){var B={left:R/2-O,top:w-S.bottom-C.bottom};var F={width:2*O,height:C.bottom};I=(0,s.Text)().style(j).value(D).offset(B).bounds(F).align("left").cssClassName("igc-gauge-start-text-node").autoFontSize(!1),T=(0,s.Text)().style(j).value(A).offset(B).bounds(F).align("right").cssClassName("igc-gauge-finish-text-node").autoFontSize(!1)}this.containerSetup(),e.attr("width",R).attr("height",w);var _=e.select(".igc");var G=e.select("defs");r.add(function(){e.datum(t).transition().ease(n[t.options.animation.ease]).duration(t.options.animation.duration).on("start",function(){t.events.call("startAnimation")}).on("end",function(){x()})}),r.addGraph([{graphs:[y],textStyle:a.style.graph.item.value,outerRadius:O,center:{x:R/2,y:w-S.bottom-C.bottom},bounds:{width:R,height:w},sliceStrokeColor:o().get(l,"style.sliceStrokeColor"),needle:{enabled:!0,colors:{fill:o().get(l,"style.needleFillColor")}},legend:k,defs:G,animationEnd:x}]),I?r.addParent(_.select(".parts"),I,"igc-gauge-start-text"):_.select(".parts").select(".igc-gauge-start-text").remove(),T?r.addParent(_.select(".parts"),T,"igc-gauge-finish-text"):_.select(".parts").select(".igc-gauge-finish-text").remove(),r.start()}}},{key:"prepareSheetData",value:function(t){var e=t.series[0];var a=t.categories,r=a.colors,n=a.inactiveColorAlpha;var i=t.categories.inactiveColor;var s=(0,d.createLegendData)(this);var l=e.data[0];var c=(0,f.replaceBlank)(o().get(e,"rawData[0].value"));var u=(0,f.replaceBlank)(l.value,0);var h=o().get(e,"index",0);var p=Number(u);var v=(0,f.replaceBlank)(o().get(l,"min.value"),0);var b=(0,f.replaceBlank)(o().get(l,"max.value"),100);void 0!==n&&(i=g.Colors.rgbStrToRgbaStr(i,n)),p=Math.min(p=Math.max(v,p),b),p=Math.abs(v-p)/Math.abs(b-v),v=0,b=1;var m=[{categoryLabel:(0,f.replaceBlank)(t.categories.data[0]),valueLabel:c,x:p,xAbs:p,color:(0,f.getColor)(h,r),groupId:0,link:l.link?l.link:null},{categoryLabel:"",valueLabel:"",x:1-p,xAbs:1-p,color:i,groupId:1,link:null,tooltip:!1}];var y=m[0];if(s({color:y.color,title:y.categoryLabel,groupId:0}).active)return m.forEach(function(t){t.pct=t.xAbs/1*100}),{type:e.type,data:m,innerRadius:e.innerRadius||0,innerRadiusPercent:e.innerRadiusPercent||0}}},{key:"graphInstanceSetup",value:function(t,e,a,r){var o=this.runtime.formatter;var n=this.getCalloutFormat(e);t.data(e.data).groupId(a).textStyle(r.textStyle).legend(r.legend).startAngle(-c.PIhalf).endAngle(c.PIhalf).innerRadius(e.innerRadiusPercent?e.innerRadiusPercent*r.outerRadius:e.innerRadius).outerRadius(r.outerRadius).center(r.center).bounds(r.bounds).sliceStrokeColor(r.sliceStrokeColor).sliceStrokeWidth(r.sliceStrokeWidth).textFormat(n).defs(r.defs).tooltip((0,v.createStyledTooltip)(this)).needle(r.needle).tooltipText(function(t){return t.data.categoryLabel}).tooltipValue(function(t){return"(".concat(o.tooltip.x.format(t.data.valueLabel),")")}).startValuesFn(function(t){return[{pct:0,color:t[0].data.color},{pct:100,color:t[1].data.color}]}).transitionDuration(this.options.animation.duration),e.showPercent&&(t.tooltipText(function(t){return"".concat(t.data.categoryLabel,": ").concat(t.value.toFixed(2),"%")}),t.tooltipValue(function(t){return"(".concat(o.tooltip.x.format(t.data.valueLabel),")")})),t.dispatch().on("animationEnd",function(){r.animationEnd()})}},{key:"emptySheetData",value:function(){return o().merge({},y(x(r.prototype),"emptySheetData",this).call(this),{series:[{title:"",type:"pie",innerRadius:50,showLabels:!0}]})}}],m(r.prototype,l),C&&m(r,C),r}(l.Pie)},7394:(t,e,a)=>{a.r(e),a.d(e,{default:()=>h});var r=a(498);var o=a.n(r);var n=a(7395);var i=a(7311);var s=a(7277);var l=a(1990);var c=a(541);var u=Object.assign({},i.default);u.instanceClass=n.Gauge,u.setupChartSheetOptions=function(){var t=this.sheetSettings,e=this.custom;e&&o().has(e,"colors")&&delete e.colors;var a=[this.setupChartSheetOptionsItem(o().merge({},e))];var r={emptySheetData:this.instanceClass.prototype.emptySheetData.bind(r),options:{sheetnames:this.chart.get("sheetnames")}};l.default.create({chartType:c.GAUGE,chart:r,transpose:this.transposeImport(),useAllColumns:e.useAllColumns,disableColumnSheets:this.disableColumnSheets}).import(this.data);var n=r.options.sheets.length;if(n>1)for(var i=0;i<n;i++){var s=o().merge({},e,o().get(t,"[".concat(i,"]"),{}));a.push(this.setupChartSheetOptionsItem(s,i))}return a},u.setupChartSheetOptionsItem=function(t){var e={categories:{colors:o().merge([],this.colors),inactiveColor:o().get(t,"inactive")||o().get(this.charts,"gauge.colors.background","#E9E9E9"),inactiveColorAlpha:o().get(t,"inactiveAlpha",1)},series:{innerRadiusPercent:o().get(t,"innerRadiusKoeficient",.7),showLabels:o().get(t,"showText",!0)},axis:[{}],style:{sliceStrokeColor:o().get(this.charts,"gauge.colors.border",t.gaugeStrokeColor),needleFillColor:o().get(this.charts,"gauge.colors.needle")}};return(0,s.default)(e,t,this.charts),e};let h=Object.freeze(u)}}]);