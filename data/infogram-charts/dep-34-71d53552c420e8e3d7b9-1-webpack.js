(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([["infogram-charts/dep-34"],{7290:(t,n,r)=>{r.r(n),r.d(n,{Bar:()=>b});var e=r(498);var a=r.n(e);var i=r(3989);var o=r(1115);var u=r(420);var l=r(4019);var c=r(3984);var s=r(3976);var h=r(4007);var f=r(1112);var v=r(3968);var d=r(3964);var x=r(1111);var g=r(7254);var y=r(4018);var p=r(1998);function b(){var t=function(t){z.duration.x=X,0===X&&(z.duration.y=X,z.duration.text=X);var i=j?function(t){return t.x0}:function(){return G};t.each(function(){if(P.length){var t=(0,o.default)(this);C=I.bandwidth();var u=[];P.forEach(function(t,n){var r=u[n]={};var e=i(t);r.x=t.x,r.xLabel=t.xLabel,r.y=t.y,r.yLabel=t.y,r.height=C,r.width=w(t.x)-w(e),r.xPos=Math.round(w(e)+(!j&&r.width>0?1:0)),r.yPos=I(n),r.color=t.color,r.index=n,r.seriesIdx=t.seriesIdx,r.link=t.link});var l=t.selectAll("path");l.transition().duration(0),t.selectAll("text").remove();var c=[];l.each(function(t){c.push(a().merge({},t))}),0===c.length&&(c=u.map(function(t){return a().merge({},t,{width:0})})),(0,f.pairData)(c,u,function(t){t.width=0});var s=function(n){m(n),(0,y.addMouseEvents)(n,_,U,F,R),e(t,c)};n(c[0]);var h=t.selectAll("path").data(c);var v=h.enter().insert("path","text");var d=0===h.size()&&h.size()<v.size();h.exit().remove(),h.style("stroke-width",0).style("fill",function(t){return t.next.color}).style("opacity",null);var x=z.duration;d?v.call(r,function(){s(h.merge(v))}):h.transition().duration(x.x).attrTween("d",O(function(t){return{xPos:t.next.xPos,yPos:t.yPos,width:t.next.width,height:t.height}})).transition().duration(x.y).on("start",function(){Y.update++}).attrTween("d",O(function(t){return t.next})).on("end",function(){if(0==--Y.update){if(0===v.size()){s(h);return}v.call(r,function(){s(h.merge(v))})}})}})};var n=function(t){var n={y:["yPos","height"]};var r;var e;var a;if(t){var i=t.next;for(r in z.duration)n[r]&&(a=n[r].length,e=0,n[r].forEach(o),a===e&&(z.duration[r]=0))}function o(n){.2>Math.abs(t[n]-i[n])&&e++}};var r=function(t,n){t.style("fill",function(t){return t.color}).style("stroke-width",0).attr("d",function(t){return A(t.xPos,t.yPos,t.width,0,0)}),t.transition().duration(X).ease(c.elasticOut).delay(V).attrTween("d",O(function(t){return t.next})).on("start",function(){Y.enter++}).on("end",function(){0==--Y.enter&&n()})};var e=function(t,n){var r=n.map(function(t){return k?k.format(t.next.xLabel):"".concat(t.next.xLabel)});j&&(r=n.map(function(t){return"".concat(t.next.yLabel)}));var e=(0,f.getAllTextDimensions)(r,D);var a=S&&C>=e.height;var i=[];a&&(i=j?b.prepareTextDataInside(n,e,D,2):b.prepareTextData(n,e,D,2,w,M,G)),i.length&&a||_.call("animationEnd");var o=(0,g.createLabel)(t,i,D);(0,g.addOutline)(o,D,N),o.transition().duration(z.duration.text).style("opacity",1).on("start",function(){Y.text++}).on("end",function(){0==--Y.text&&_.call("animationEnd")}),j&&h(o),(0,y.addMouseEvents)(o.filter(function(t){return t.inside}),_,U,F,R)};var l=function(t,n){return function(){var r=(0,p.rgb)(t);return r.opacity=n,r.toString()}};var h=function(t){var n=(0,g.labelInfo)(D);if(n.manual){var r=n.stroke,e=n.fill;var a=l(e,.3);var i=l(r,.3);_.on("highlightStart.text",function(n){var r=t.filter(L(n)).transition().duration(150).ease(s.linear).style("fill",a);r.select(".text-outline").attr("stroke",i).attr("fill",i),r.select(".text-outline-fill").style("fill",a)}),_.on("highlightEnd.text",function(n){var a=t.filter(L(n)).transition().duration(150).ease(s.linear).style("fill",(0,p.rgb)(e).toString());a.select(".text-outline").attr("fill",(0,p.rgb)(r).toString()).attr("stroke",(0,p.rgb)(r).toString()),a.select(".text-outline-fill").style("fill",(0,p.rgb)(e).toString())});return}_.on("highlightStart.text",function(n){t.filter(L(n)).transition().duration(150).ease(s.linear).style("opacity",.3)}),_.on("highlightEnd.text",function(n){t.filter(L(n)).transition().duration(150).ease(s.linear).style("opacity",1)})};var L=function(t){return function(n){return n.seriesIdx!==t}};var m=function(t){B&&B.data().forEach(function(t){B.addListener({id:"".concat(T,"_").concat(t.groupId),dispatch:_})}),_.on("highlightStart",function(n){t.filter(function(t){return t.seriesIdx!==n}).transition().duration(150).ease(s.linear).style("opacity",.3)}),_.on("highlightEnd",function(n){t.filter(function(t){return t.seriesIdx!==n}).transition().duration(150).ease(s.linear).style("opacity",1)})};var w=(0,i.default)();var I=(0,i.default)();var P=[];var T;var E;var k;var S=!0;var M=!1;var D=(0,d.chartOptions)().style.graph.item.value;var A=v.barToRight;var O=(0,v.createTweenShape)(A,"y");var z={duration:{x:700,y:400,text:50}};var Y={enter:0,update:0,text:0};var V=0;var X=700;var _=(0,u.default)("highlightStart","highlightEnd","animationEnd","openUrl");var C=0;var F=function(t){return t.x};var R=function(t){return t.y};var U=x.getTooltip;var j=!1;var B;var G=0;var N=function(t){return k?k.format(t.text):t.text};return Object.assign(t,{scaleX:function(n){return arguments.length?(w=n.copy(),t):w},scaleY:function(n){return arguments.length?(I=n.copy(),t):I},data:function(n){return arguments.length?(P=n,t):P},groupId:function(n){return arguments.length?(E=n,t):E},chartId:function(n){return arguments.length?(T=n,t):T},dispatch:function(){return _},valuesOutside:function(n){return arguments.length?(M=!!n,t):M},showValues:function(n){return arguments.length?(S=!!n,t):S},textStyle:function(n){return arguments.length?(D=n,t):D},tooltip:function(n){return arguments.length?(U=n,t):U},tooltipText:function(n){return arguments.length?(F=n,t):F},tooltipValue:function(n){return arguments.length?(R=n,t):R},transitionDelay:function(n){return arguments.length?(V=n,t):V},transitionDuration:function(n){return arguments.length?(X=n,t):X},numberFormat:function(n){return arguments.length?(k=n,t):k},isGantt:function(n){return arguments.length?(j=n,t):j},legend:function(n){return arguments.length?(B=n,t):B},baseValue:function(n){return arguments.length?(G=n||0,t):G}}),t}b.prepareTextData=function(t,n,r,e,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;var u=[];var c=(0,l.default)(a.range());return t.forEach(function(t,r){var a=t.next;if(null!==a.y){var l={};var s=a.xPos;var h=s;var f="start";var v=c-s;var d=s;var x=-1;var g=!0;var y=n.collection[r];var p=y.width+e;var b=Math.round(Math.abs(a.width));var L=!i&&b>p;(a.x<o||a.x===o&&"POPULATION_PYRAMID_LEFT"===a.seriesIdx)&&(f="end",d=v,v=s,x=1),L?h-=x*e:v>=b+p?h-=x*(b+e):d>=p?(h+=x*e,f="end"===f?"start":"end"):g=!1,g&&(l.inside=L,l.textX=h,l.textY=a.yPos+a.height/2+.25*y.height,l.textAnchor=f,l.text=a.xLabel,l.index=r,l.seriesIdx=a.seriesIdx,l.yLabel=a.yLabel,l.xLabel=a.xLabel,l.groupLabel=a.groupLabel,l.color=a.color,u.push(l))}}),u},b.prepareTextDataInside=function(t,n,r,e){var a=[];return t.forEach(function(t,i){var o=t.next;if(null!==o.y){var u={};var l=o.xPos;var c=n.collection[i];var s=c.width;var f=s+2*e;var v=Math.round(Math.abs(o.width));var d=v-2*e;var x=o.yLabel;if(!(v>f)){var g=h.Text.getTrimmedText([x],r,d),y=g.collection,p=g.widths;(x=y[0])===h.ELLIPSIS?(x="",s=0):s=p[0]}u.textX=Math.round(e+l+(d-s)/2),u.inside=!0,u.textY=Math.round(o.yPos+o.height/2+.25*c.height),u.textAnchor="start",u.text=x,u.index=i,u.seriesIdx=o.seriesIdx,u.yLabel=o.yLabel,u.xLabel=o.xLabel,u.groupLabel=o.groupLabel,u.color=o.color,a.push(u)}}),a}}}]);