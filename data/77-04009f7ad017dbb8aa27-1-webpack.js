(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[77],{7042:(e,t,n)=>{(t=e.exports=n(482)(!1)).push([e.id,"._2k9QxMzNFjSLxe4cLhx7uH {\n    margin-left: 10px;\n}\n._2k9QxMzNFjSLxe4cLhx7uH._2pt5dl-VzLueHh_pBgqDF7 {\n    margin-left: 20px;\n    padding-bottom: 0;\n    padding-right: 0;\n}\n._33n9OKDfuHLhO7Fhe_OaUM {\n    position: relative;\n    box-sizing: border-box;\n    width: 100%;\n    margin-left: -10px;\n    padding: 10px 0 0 10px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n._33n9OKDfuHLhO7Fhe_OaUM:last-child {\n    padding-bottom: 10px;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM::before,\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM::after {\n    content: '';\n    position: absolute;\n    left: 0;\n    border: solid #656565;\n    width: 9px;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM::before {\n    top: -10px;\n    height: 30px;\n    border-width: 0 0 1px 1px;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM:first-child:before {\n    height: 20px;\n    top: 0;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM::after {\n    top: 20px;\n    height: 10px;\n    border-width: 0 0 0 1px;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM:last-child {\n    padding-bottom: 0;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM:last-child:after {\n    border-width: 0;\n}\n._2aqLcWA7brJ-w6mo0D4hce {\n    vertical-align: middle;\n}\n._2aqLcWA7brJ-w6mo0D4hce {\n    padding-left: 10px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n",""]),t.locals={outlineList:"_2k9QxMzNFjSLxe4cLhx7uH",__inner:"_2pt5dl-VzLueHh_pBgqDF7",outlineListItem:"_33n9OKDfuHLhO7Fhe_OaUM",outlineLabel:"_2aqLcWA7brJ-w6mo0D4hce"}},6983:(e,t,n)=>{(t=e.exports=n(482)(!1)).push([e.id,'._1mollFj5y9e4FDgS_04kFf._2sMyDpTBdBXk1FBPRkYPCr .ig-container {\n    background: transparent url("/i/chessboard-tile.jpg") repeat;\n}\n._1mollFj5y9e4FDgS_04kFf {\n    transform-origin: 0 0;\n}\n._1mollFj5y9e4FDgS_04kFf .ig-container {\n    top: 30px !important;\n}\n.LMMMrwozs1HN64EoqC-PW {\n    transform-origin: 50% 0;\n}\n',""]),t.locals={responsiveContainer:"_1mollFj5y9e4FDgS_04kFf",__transparentBackground:"_2sMyDpTBdBXk1FBPRkYPCr",responsiveContainerContents:"LMMMrwozs1HN64EoqC-PW"}},6099:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});let i='<img src="<%= image %>" class="video">\n<% if (media_type === \'youtube\') { %>\n    <img src="/i/media/youtube_play.png" class="youtube-play-icon play-icon">\n<% } else if (media_type === \'vimeo\') { %>\n    <img src="/i/media/vimeo_play.png?2" class="vimeo-play-icon play-icon">\n<% } %>\n'},6097:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});let i='<% _.each(charts_data, function(data, idx) { %>\n<% if (showTitles) { %>\n<h2 class="moveable particle chart-title" style="margin-right:0px; margin-bottom:17px; margin-left:0px;"><div class="bodytitle"><div class="innertext"><%- titles[idx].contents %></div></div></h2>\n<% } %>\n<div class="moveable chart" id="chart_<%= id %>_<%= idx %>">\n  <div id="Chart_<%= id %>_<%= idx %>" class="inner"></div>\n</div>\n<% }); %>\n'},6095:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});let i='<table>\n  <tr>\n    <td style="vertical-align: top; padding-top: 3px;">\n      <img src="/i/video.svg" style="width: 51px;">\n    </td>\n    <td style="vertical-align: middle !important;">\n      <div class="bodytext" style="float: left; margin-left: 20px;">\n        <div class="inner"><%= url %></div>\n      </div>\n    </td>\n  </tr>\n</table>\n'},7041:(e,t,n)=>{var i=n(7042);var r;"string"==typeof i&&(i=[[e.id,i,""]]);var a={hmr:!0};a.transform=r,a.insertInto=void 0,n(483)(i,a),i.locals&&(e.exports=i.locals)},6982:(e,t,n)=>{var i=n(6983);var r;"string"==typeof i&&(i=[[e.id,i,""]]);var a={hmr:!0};a.transform=r,a.insertInto=void 0,n(483)(i,a),i.locals&&(e.exports=i.locals)},6101:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var i=n(823);var r=n(434);var a=n(6102);var l=n(498);let o={collectElements:function(e){r.default.dispatch({type:i.default.COLLECT_ELEMENTS,infographic:e})},setElementVisible:function(e,t){r.default.dispatch({type:i.default.SET_ELEMENT_VISIBLE,elementId:e,visible:t}),(0,a.default)()},setElementChildVisible:function(e,t,n){r.default.dispatch({type:i.default.SET_ELEMENT_CHILD_VISIBLE,elementId:e,index:parseInt(t),visible:n}),(0,a.default)()},toggleAllElementVisibility:function(e){r.default.dispatch({type:i.default.TOGGLE_ALL_ELEMENTS_VISIBLE,visible:e}),(0,a.default)()},revealSelectionFrame:function(e,t,n,a){r.default.dispatch({type:i.default.REVEAL_SELECTION_FRAME,objectId:e,objectType:t,childIndex:n,position:a})},hideSelectionFrame:function(){r.default.dispatch({type:i.default.HIDE_SELECTION_FRAME})},setScrollPosition:function(e){var t=l.extend({type:i.default.SET_SCROLL_POSITION},e);r.default.dispatch(t)}}},6984:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var i=n(434);var r=n(823);function a(e){i.default.dispatch({type:r.default.RESPONSIVE_INFOGRAPHIC_HEIGHT,height:e})}},7037:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var i=n(374);var r=n(406);var a=n(454);var l=n.n(a);var o=n(6101);var s=n(2375);var c=n(684);var u=n(7038);var d=n(7041);var h=n.n(d);function f(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(){return{elements:s.default.getElements(),selectAllChecked:s.default.allElementsChecked(),selectAllType:s.default.getAllCheckedType()}}var y=function(e){"use strict";var t;!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,e);var n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=m(a),n;if(t){var i=m(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);var r;return(r=n)&&("object"==(r&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r)||"function"==typeof r)?r:f(this)});function a(){var e;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,a),e=n.apply(this,arguments),v(f(e),"state",_()),v(f(e),"_handleStoreChange",function(){e.setState(_())}),v(f(e),"_handleElementCheckboxChange",function(e){var t=e.target;var n=t.getAttribute("data-element-id");o.default.setElementVisible(n,t.checked)}),v(f(e),"_handleChildCheckboxChange",function(e){var t=e.target;var n=t.getAttribute("data-element-id");var i=t.getAttribute("data-index");o.default.setElementChildVisible(n,i,t.checked)}),v(f(e),"_handleSelectAllChange",function(e){var t=e.target;o.default.toggleAllElementVisibility(t.checked)}),e}var d,y;return d=[{key:"render",value:function(){var e=this.state;var t=e.elements;return r.createElement(u.default,{title:i.default.t("app.download.outline_title"),selectAllChecked:e.selectAllChecked,selectAllType:e.selectAllType,onSelectAllChange:this._handleSelectAllChange},r.createElement("ul",{className:h().outlineList},t.map((function(e){var t=e.get("id");var n;var i=e.get("children");i.isEmpty()||(n=r.createElement("ul",{className:l()(h().outlineList,h().__inner)},i.map((function(e,n){var i="outline-subitem-"+t+"-"+n;return r.createElement("li",{className:h().outlineListItem,key:t+"-"+n},r.createElement(c.default,{checked:e.get("checked"),customCss:"vertical-align: middle","data-index":n,"data-element-id":t,disabled:e.get("disabled"),id:i,onChange:this._handleChildCheckboxChange,type:"check"}),r.createElement("label",{className:h().outlineLabel,htmlFor:i},e.get("title")))}).bind(this))));var a="outline-item-"+t;var o=[h().outlineListItem];return r.createElement("li",{className:o.join(" "),key:e.get("id")},r.createElement(c.default,{checked:e.get("checked"),customCss:"vertical-align: middle","data-element-id":t,id:a,onChange:this._handleElementCheckboxChange,type:e.get("checkType")}),r.createElement("label",{className:h().outlineLabel,htmlFor:a,title:e.get("title")},e.get("title")),n)}).bind(this))))}},{key:"componentDidMount",value:function(){s.default.addListener(this._handleStoreChange)}},{key:"componentWillUnmount",value:function(){s.default.removeListener(this._handleStoreChange)}}],p(a.prototype,d),y&&p(a,y),a}(r.Component);v(y,"displayName","Outline");let b=y},6978:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var i=n(406);var r=n(456);var a=n(552);var l=n(454);var o=n.n(l);var s=n(508);var c=n(6979);var u=n.n(c);var d=n(6982);var h=n.n(d);var f=n(728);var p=n(2653);var v=n(2375);var m=n(2654);var g=n(5355);var _=n(6103);var y=n(2376);var b=n(6101);var O=n(6984);var w=n(2650);var E=n(6985);var C=n(7037);var S=n(7043);var x=n(7044);var L=n(1945);var k=n(631);var F=n(2373);var T=n(434);var I=n(1202);var D=n(370);function j(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n,i,r,a,l){try{var o=e[a](l);var s=o.value}catch(e){n(e);return}o.done?t(s):Promise.resolve(s).then(i,r)}function V(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var H=function(e){"use strict";var t;!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(a,e);var n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=M(a),n;if(t){var i=M(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);var r;return(r=n)&&("object"==(r&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r)||"function"==typeof r)?r:j(this)});function a(e){var t;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,a),R(j(t=n.call(this,e)),"_returnToProject",function(){return window.app.router.navigate("#/edit/".concat(t.state.infographicId))}),t._handleOutlineStoreChange=t._handleOutlineStoreChange.bind(j(t)),t._handleSelectionFrameStoreChange=t._handleSelectionFrameStoreChange.bind(j(t)),t._handleSelectionFrameDownloadClick=t._handleSelectionFrameDownloadClick.bind(j(t)),t._revealSelectionFrame=t._revealSelectionFrame.bind(j(t)),t.state={hiddenElements:(0,r.fromJS)(v.default.readHiddenElements()),outlineVisible:v.default.isOutlineVisible()},t}var l,c;return l=[{key:"render",value:function(){var e=this;var t=this.state,n=t.transparentBackground,r=t.selectionFrameVisible,a=t.selectionFramePosition,l=t.outlineVisible;var s=o()(h().responsiveContainer,R({},h().__transparentBackground,n));var c,d;var f;void 0!==r&&l&&(f=i.createElement(S.default,{onLeave:b.default.hideSelectionFrame,position:a,visible:r},i.createElement("div",{className:u().elementToolbar},i.createElement("a",{className:u().downloadIcon,href:"",onClick:this._handleSelectionFrameDownloadClick}))));var p=l?i.createElement(C.default,null):null;return i.createElement(E.default,{leftSidebar:p,ref:function(t){e._viewport=t},viewportWidth:c,viewportHeight:d,goBackToProject:this._returnToProject},i.createElement("div",{className:s,style:{},ref:function(t){e._viewportNode=t}},i.createElement("div",{ref:function(t){e._containerNode=t},style:{},className:h().responsiveContainerContents})),this.state.canDownload&&f)}},{key:"componentDidMount",value:function(){T.default.dispatch({type:F.LOAD_LIVE_DATA_ONCE}),this._updateContainerOffset();var e=this.state,t=e.modelIsLoading,n=e.infographicModel;v.default.addListener(this._handleOutlineStoreChange),m.default.addListener(this._handleSelectionFrameStoreChange),t||this._renderInfographic(n)}},{key:"componentWillUnmount",value:function(){this._clearInfographic(),m.default.removeListener(this._handleSelectionFrameStoreChange),v.default.removeListener(this._handleOutlineStoreChange)}},{key:"componentDidUpdate",value:function(e,t){var n=this;var i=this.state,a=i.modelIsLoading,l=i.infographicModel,o=i.hiddenElements,s=i.outlineVisible;if(!a){var c=Promise.resolve();(l!==t.infographicModel||e.liveData!==this.props.liveData)&&(c=this._renderInfographic(l)),s===t.outlineVisible&&(0,r.is)(o,t.hiddenElements)||c.then(function(){n._currentView.setVisibilityOutline(v.default.getElements().toJS()),(0,O.default)(n._currentView.el.offsetHeight)}),function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var l=!0,o=!1,s=void 0;try{for(var c=i[Symbol.iterator](),u;!(l=(u=c.next()).done);l=!0){var d=u.value;if(!(0,r.is)(e[d],t[d]))return!0}}catch(e){o=!0,s=e}finally{try{l||null==c.return||c.return()}finally{if(o)throw s}}return!1}(this.state,t,"displayPaper","paperWidth","paperHeight","paperZoomRatio")&&this._updateContainerOffset()}}},{key:"_renderInfographic",value:function(e){var t=this;var n=new s.default(D.extend(!0,{},e.attributes));if(this._renderPromise)this._renderPromise.then(function(){t._renderInfographic(n)});else{var i=this;var r;var a;this._renderPromise=new Promise((r=function(e){var t,r;return function(e,t){var n,i,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw TypeError("Generator is already executing.");for(;l;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,i=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!(r=(r=l.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){l=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){l.label=a[1];break}if(6===a[0]&&l.label<r[1]){l.label=r[1],r=a;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(a);break}r[2]&&l.ops.pop(),l.trys.pop();continue}a=t.call(e,l)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}(this,function(a){switch(a.label){case 0:return i._clearInfographic(),[4,(0,L.default)(n)];case 1:return a.sent(),(t=document.createElement("div")).style.display="inline-block",i._containerNode.appendChild(t),r=new x.default({model:n,container:t,edit:!1,viewMode:"download",liveData:i.props.liveData}),i._currentView=r,r.render(function(){var n=r.el;(0,O.default)(n.offsetHeight),i._listenToInfographicHoverEvents(),t.parentNode.removeChild(t),requestAnimationFrame(function(){i._containerNode.appendChild(t),e()})}),i._currentView.setVisibilityOutline(v.default.getElements().toJS()),[2]}})},a=function(){var e=this,t=arguments;return new Promise(function(n,i){var a=r.apply(e,t);function l(e){P(a,n,i,l,o,"next",e)}function o(e){P(a,n,i,l,o,"throw",e)}l(void 0)})},function(e){return a.apply(this,arguments)})).then(function(){t._renderPromise=null})}return this._renderPromise}},{key:"_handleOutlineStoreChange",value:function(){this.setState({hiddenElements:(0,r.fromJS)(v.default.readHiddenElements()),outlineVisible:v.default.isOutlineVisible()})}},{key:"_handleSelectionFrameStoreChange",value:function(){this.setState({selectionFrameVisible:m.default.isFrameVisible(),selectionFramePosition:m.default.getFramePosition()})}},{key:"_handleSelectionFrameDownloadClick",value:function(e){e.preventDefault(),(0,w.downloadSingleObject)()}},{key:"_listenToInfographicHoverEvents",value:function(){this._infographicElements=Array.from(this._containerNode.querySelectorAll(".moveable:not(.ig-theme-group-chart):not(.table-caption), .igc-chart.inner, .moveable > .map"));var e=!0,t=!1,n=void 0;try{for(var i=this._infographicElements[Symbol.iterator](),r;!(e=(r=i.next()).done);e=!0){var a=r.value;a.classList.contains("chart-title")&&a.parentNode.classList.contains("chartcontainer")||a.addEventListener("mouseenter",this._revealSelectionFrame,!1)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"_revealSelectionFrame",value:function(e){var t=this.state.displayPaper;var n=e.currentTarget;var i=function(e){var t={};var n;if(e.classList.contains("map")?n=".map":e.classList.contains("chart")?n=".moveable.chart":e.classList.contains("igc-chart")&&(n=".igc-chart.inner"),n){var i=e.parentNode.querySelectorAll(n);t.childIndex=k.default.elementIndexInNodeList(e,i),t.objectType="chart"}else e.classList.contains("media")?t.objectType="media":t.objectType="particle";var r=k.default.findAncestorWithClassName(e,"moveable_w");return r?(t.objectId=r.getAttribute("data-object-id"),t):null}(n);if(i){var r=n.getBoundingClientRect();var a=window.scrollY;var l=i.objectId,o=i.objectType,s=i.childIndex;var c=a+r.top-this._containerOffsetTop;t&&(c+=30),b.default.revealSelectionFrame(l,o,s,{top:c,left:r.left-this._containerOffsetLeft+this._viewport.scrollLeft,width:r.width,height:r.height})}}},{key:"_clearInfographic",value:function(){if(this._infographicElements){var e=!0,t=!1,n=void 0;try{for(var i=this._infographicElements[Symbol.iterator](),r;!(e=(r=i.next()).done);e=!0)r.value.removeEventListener("mouseenter",this._revealSelectionFrame,!1)}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this._infographicElements=null}this._currentView&&(this._currentView.remove(),this._currentView=null)}},{key:"_updateContainerOffset",value:function(){var e=this._viewportNode.getBoundingClientRect();this._containerOffsetTop=e.top+window.scrollY,this._containerOffsetLeft=e.left}}],c=[{key:"getStores",value:function(){return[f.default,p.default,g.default,_.default]}},{key:"calculateState",value:function(){return{infographicModel:f.default.model,infographicId:f.default.infographicId,modelIsLoading:f.default.isLoading,canDownload:g.default.canDownload,transparentBackground:p.default.get("transparentBackground")&&y.TYPES_WITH_TRANSPARENCY.includes(_.default.activeTab)}}}],l&&V(a.prototype,l),c&&V(a,c),a}(i.Component);H=function(e,t,n,i){var r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i,l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(a=(r<3?l(a):r>3?l(t,n,a):l(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}([(0,a.connect)(function(e){return{liveData:e.get("liveData")}}),(0,I.default)(),A("design:type",Function),A("design:paramtypes",[void 0])],H);let B=H},7043:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var i=n(413);var r=n.n(i);var a=n(406);var l=n(454);var o=n.n(l);var s=n(6979);var c=n.n(s);function u(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){"use strict";var t;!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(i,e);var n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=f(i),n;if(t){var r=f(this).constructor;n=Reflect.construct(e,arguments,r)}else n=e.apply(this,arguments);var a;return(a=n)&&("object"==(a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)||"function"==typeof a)?a:u(this)});function i(){var e;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),e=n.apply(this,arguments),h(u(e),"_handleMouseLeave",function(){e.props.onLeave&&e.props.onLeave()}),e}var r,l;return r=[{key:"render",value:function(){var e=this.props.position;return a.createElement("div",{className:o()(c().elementDecorator,this.props.className,h({},c().__visible,this.props.visible)),onMouseLeave:this._handleMouseLeave,style:e},this.props.children)}}],d(i.prototype,r),l&&d(i,l),i}(a.Component);h(v,"displayName","SelectionFrame"),h(v,"propTypes",{children:r().oneOfType([r().arrayOf(r().element),r().element]),onLeave:r().func,position:r().shape({top:r().number.isRequired,left:r().number.isRequired,width:r().number.isRequired,height:r().number.isRequired}).isRequired,visible:r().bool.isRequired,className:r().string});let m=v},6098:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var i=n(6099);var r=n(2130);var a=n(511);var l=n(370);let o=r.default.extend({template:i.default,render:function(){if(r.default.prototype.render.apply(this),"vimeo"===this.model.get("media_type")){var e=this.$(".video");var t=this.model.get("shrink");var n=l(".ig-items").width();if(t){var i=a.default.getMargin();n=(l(".ig-items").width()-i)/2}e.height(.75*n)}return this}})},7044:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var i=n(1961);var r=n(6094);var a=n(6096);var l=n(6098);var o=n(2132);var s=n(2134);var c=n(2374);var u=n(498);var d=function(){return{render:function(){return!0}}};var h=i.default.extend({initialize:function(e){i.default.prototype.initialize.apply(this,[e]),this.ShareButtonView=d,this.EmbedButtonView=d,this.VideoView=r.default,this.ChartView=a.default,this.MediaVideoView=l.default,this.SlideshareView=o.default,this.MediaImageView=s.default,delete window.moveables}});u.extend(h.prototype,c.default);let f=h},6096:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var i=n(6097);var r=n(2011);var a=n(732);var l=n(2124);var o=n(2380);var s=n(2375);var c=n(2381);var u=n(541);var d=n(498);var h=n(370);let f=l.default.extend({template:i.default,className:"chartcontainer",initialize:function(e){var t=this;l.default.prototype.initialize.apply(this,[e]);var n=this.model.getTypeMod();var i=this.getData();var r=(0,c.default)(n,this.model.get("custom"));var a=this.model.get("sheetnames")||[];var h=!0===r.switchRowsColumns;this.showTitles=!0,this.animate="gif"===d.get(this,"parent.options.exportSettings.imageFormat"),"24_0"===n&&(this.animate=!1),this.charts_data=[],this.rendered=[];var f=[];var p=[];var v=this.options.renderSettings;var m=this.model.get("object_id");p=s.default.readHiddenChildren(m);var g=this.options.showColumns||[];if(o.default.hasMultipleSheets({typeMod:n,custom:r,data:i})&&!r.useAllColumns)this.titles=[],i.forEach(function(e,n){var i=[e];(g.length&&-1===g.indexOf(n)||-1!==p.indexOf(n))&&f.push(n),t.titles[n]=t._createTitle(a[n]||(e[0]?e[0][0]:"Sheet "+n),n),t.charts_data.push(i)}),this.titles.length<2&&(this.showTitles=!1);else{this.titles=[];var _=i||[];this.groupedTitles=[],r.useAllColumns||(_=[i[0]]);var y=0;_.forEach(function(e,n){e.length?(t.groupedTitles[n]=h?e.slice(1).map(function(e){return t._createTitle(e[0],y++)}):e[0].slice(1).map(function(e){return t._createTitle(e,y++)}),t.titles=t.titles.concat(t.groupedTitles[n])):t.groupedTitles[n]=[]});var b=e.parent.showObjects&&Object.keys(e.parent.showObjects).length;if(this.titles.length&&(1!==this.titles.length||b)){var O=0;_.forEach(function(e,n){h?t.groupedTitles[n].forEach(function(n,i){var r=[[e[0].slice(0),e[i+1].slice(0)]];t.charts_data.push(r),(g.length&&-1===g.indexOf(O)||-1!==p.indexOf(O))&&f.push(O),O++}):t.groupedTitles[n].forEach(function(n,i){var r=i+1;var a=[[]];a[0]=d.map(e,function(e){return[e[0],e[r]]}),t.charts_data.push(a),(g.length&&-1===g.indexOf(O)||-1!==p.indexOf(O))&&f.push(O),O++})})}else this.showTitles=!1,this.charts_data.push(i);[u.BAR_RACE,u.BAR_RACE_IMG].includes(n)&&(this.showTitles=!1)}if(v.displayEnabledChartsOnly&&f.length>0){var w=this.titles;var E=w.length;var C=this.charts_data;this.titles=[],this.charts_data=[];for(var S=0;S<E;S++)-1===f.indexOf(S)&&(this.titles.push(w[S]),this.charts_data.push(C[S]))}this.listenTo(this.model,"change:dataSets",this._updateVisibility)},_updateVisibility:function(){var e=this.model.get("dataSets");var t=this.$el.find(".moveable.chart");var n=this.$el.find(".moveable.particle");t.each((function(t,i){-1!==e.indexOf(t)?(h(i).removeClass("hidden"),h(n[t]).removeClass("hidden"),-1===this.rendered.indexOf(t)&&this.renderChart(t)):(h(i).addClass("hidden"),h(n[t]).addClass("hidden"))}).bind(this))},_createTitle:function(e,t){return d.get(e,"value")&&(e=e.value),{contents:e,sheetIndex:t}},initChart:function(){var e=this.titles.length;if(e>0)for(var t=0;t<e;t++)this.renderChart(t,this.titles[t].sheetIndex);else this.renderChart(0)},getData:function(){var e,t,n,i;var r=this.model.get("custom");var a=(null===(n=this.options.liveData)||void 0===n?void 0:null===(e=n[null===(t=r.live)||void 0===t?void 0:t.key])||void 0===e?void 0:e.data)||this.model.get("data");if(null==r?void 0:null===(i=r.live)||void 0===i?void 0:i.enabled){var l;var o=null==r?void 0:null===(l=r.live)||void 0===l?void 0:l.sheetSelected;if(o>-1)return[a[o]]}return a},renderChart:function(e,t){if(e=e||0,this.charts_data.length){var n=this.model,i=this.animate,l=this.infographic,o=this.options;var s=l.get("theme");var c=this.getData();var u="".concat(n.get("chart_id"),"_").concat(e);var d=document.getElementById("Chart_".concat(u));r.default.create({container:d,chart:n,theme:s,id:u,data:c,sheetIndex:t,animate:i,viewMode:o.viewMode,assets:o.assets,language:l.get("properties").language}).then(function(e){(0,a.addEntity)(n.get("chart_id"),e)}),this.rendered.push(e)}},prepare:function(){var e=this.model.get("chart_id");this.el.id="CHART_"+e;var t={id:e,titles:this.titles,showTitles:this.showTitles,charts_data:this.charts_data};return d.template(this.template)(t)}})},6094:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(6095);var r=n(2122);var a=n(498);let l=r.default.extend({template:i.default,render:function(){var e=this.model.get("text").split("/").pop();var t={};return/youtube/.test(this.model.get("text"))?t.url="//youtu.be/"+e:t.url="//vimeo.com/"+e,this.$el.css({"padding-bottom":0,height:"60px"}),this.$el.html(a.template(this.template)(t)),this}})}}]);